<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåª Plants vs Zombies - Redis Edition</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Fredoka+One:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background -->
    <div class="background">
        <div class="clouds"></div>
        <div class="sun-background"></div>
    </div>

    <!-- Main Game Container -->
    <div id="gameContainer" class="game-container">
        
        <!-- Header -->
        <header class="game-header">
            <div class="logo">
                <h1>üåª Plants vs Zombies</h1>
                <span class="subtitle">Redis Edition</span>
            </div>
            
            <!-- Game Controls in Navigation -->
            <div class="nav-controls">
                <button id="startGameBtn" class="nav-btn start-btn">
                    üöÄ Start Game
                </button>
                <button id="pauseGameBtn" class="nav-btn pause-btn" style="display: none;">
                    ‚è∏Ô∏è Pause
                </button>
                <div class="audio-controls" style="display: none;" id="audioControls">
                    <button id="musicToggle" class="audio-btn" title="Toggle Music">
                        üéµ
                    </button>
                    <button id="sfxToggle" class="audio-btn" title="Toggle Sound Effects">
                        üîä
                    </button>
                </div>
            </div>
            
            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-icon">‚òÄÔ∏è</span>
                    <span id="sunAmount" class="stat-value">50</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">üèÜ</span>
                    <span id="scoreAmount" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">üåä</span>
                    <span>Wave <span id="waveNumber" class="stat-value">1</span></span>
                </div>
            </div>

            <div class="player-info">
                <span id="playerName" class="player-name">Player</span>
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Connecting...</span>
                </div>
            </div>
        </header>

        <!-- Game Board -->
        <main class="game-main">
            <div class="game-board-container">
                <!-- Lawn Mowers -->
                <div class="lawn-mowers">
                    <div class="lawn-mower" data-row="0">üöú</div>
                    <div class="lawn-mower" data-row="1">üöú</div>
                    <div class="lawn-mower" data-row="2">üöú</div>
                    <div class="lawn-mower" data-row="3">üöú</div>
                    <div class="lawn-mower" data-row="4">üöú</div>
                </div>

                <!-- Game Board Grid -->
                <div id="gameBoard" class="game-board">
                    <!-- Grid cells will be generated by JavaScript -->
                </div>

                <!-- Projectiles Layer -->
                <div id="projectilesLayer" class="projectiles-layer"></div>

                <!-- Effects Layer -->
                <div id="effectsLayer" class="effects-layer"></div>
            </div>

            <!-- Side Panel -->
            <aside class="side-panel">
                <!-- Plant Selection -->
                <div class="plant-selection">
                    <h3>üå± Plant Arsenal</h3>
                    <div class="plant-cards">
                        <div class="plant-card" data-plant="üåª" data-cost="50">
                            <div class="plant-icon">üåª</div>
                            <div class="plant-info">
                                <div class="plant-name">Sunflower</div>
                                <div class="plant-cost">‚òÄÔ∏è 50</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="üå±" data-cost="100">
                            <div class="plant-icon">üå±</div>
                            <div class="plant-info">
                                <div class="plant-name">Peashooter</div>
                                <div class="plant-cost">‚òÄÔ∏è 100</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="‚ùÑÔ∏è" data-cost="175">
                            <div class="plant-icon">‚ùÑÔ∏è</div>
                            <div class="plant-info">
                                <div class="plant-name">Snow Pea</div>
                                <div class="plant-cost">‚òÄÔ∏è 175</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="üå∞" data-cost="50">
                            <div class="plant-icon">üå∞</div>
                            <div class="plant-info">
                                <div class="plant-name">Wall-nut</div>
                                <div class="plant-cost">‚òÄÔ∏è 50</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="üçí" data-cost="150">
                            <div class="plant-icon">üçí</div>
                            <div class="plant-info">
                                <div class="plant-name">Cherry Bomb</div>
                                <div class="plant-cost">‚òÄÔ∏è 150</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="üå∂Ô∏è" data-cost="125">
                            <div class="plant-icon">üå∂Ô∏è</div>
                            <div class="plant-info">
                                <div class="plant-name">Jalapeno</div>
                                <div class="plant-cost">‚òÄÔ∏è 125</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="üåµ" data-cost="125">
                            <div class="plant-icon">üåµ</div>
                            <div class="plant-info">
                                <div class="plant-name">Cactus</div>
                                <div class="plant-cost">‚òÄÔ∏è 125</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="üçÑ" data-cost="0">
                            <div class="plant-icon">üçÑ</div>
                            <div class="plant-info">
                                <div class="plant-name">Puff-shroom</div>
                                <div class="plant-cost">‚òÄÔ∏è FREE</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                    </div>
                </div>

                <!-- Power-ups -->
                <div class="powerups-section">
                    <h3>‚ö° Power-ups</h3>
                    <div class="powerup-cards">
                        <div class="powerup-card" data-powerup="‚òÄÔ∏è">
                            <div class="powerup-icon">‚òÄÔ∏è</div>
                            <div class="powerup-name">Sun Boost</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="powerup-card" data-powerup="‚ö°">
                            <div class="powerup-icon">‚ö°</div>
                            <div class="powerup-name">Speed Boost</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="powerup-card" data-powerup="üõ°Ô∏è">
                            <div class="powerup-icon">üõ°Ô∏è</div>
                            <div class="powerup-name">Plant Shield</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="powerup-card" data-powerup="üí•">
                            <div class="powerup-icon">üí•</div>
                            <div class="powerup-name">Damage Boost</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                    </div>
                </div>

                <!-- Multiplayer Info -->
                <div class="multiplayer-info">
                    <h3>üë• Players</h3>
                    <div id="playersList" class="players-list">
                        <!-- Players will be populated by JavaScript -->
                    </div>
                </div>
            </aside>
        </main>

        <!-- Wave Progress -->
        <div class="wave-progress">
            <div class="wave-info">
                <span id="waveMessage" class="wave-message">Prepare your defenses!</span>
                <div class="progress-bar">
                    <div id="waveProgressBar" class="progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div id="mainMenuScreen" class="screen">
        <div class="main-menu-container">
            <div class="game-title">
                <h1>üåª Plants vs Zombies</h1>
                <p class="game-subtitle">Redis Edition - Defend Your Garden!</p>
            </div>
            
            <div class="main-menu-buttons">
                <button id="startNewGameBtn" class="main-menu-btn new-game-btn">
                    <div class="btn-icon">üå±</div>
                    <div class="btn-content">
                        <div class="btn-title">Start New Game</div>
                        <div class="btn-description">Begin a fresh adventure</div>
                    </div>
                </button>
                
                <button id="resumeGameMenuBtn" class="main-menu-btn resume-game-btn">
                    <div class="btn-icon">üîÑ</div>
                    <div class="btn-content">
                        <div class="btn-title">Resume Game</div>
                        <div class="btn-description">Continue your saved progress</div>
                    </div>
                </button>
                
                <button id="leaderboardMenuBtn" class="main-menu-btn leaderboard-btn">
                    <div class="btn-icon">üèÜ</div>
                    <div class="btn-content">
                        <div class="btn-title">Leaderboard</div>
                        <div class="btn-description">View top players</div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- New Game Setup Screen -->
    <div id="newGameScreen" class="screen" style="display: none;">
        <div class="login-container">
            <div class="login-header">
                <h2>üå± Start New Game</h2>
                <p>Enter your player name to begin your garden defense!</p>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <label for="newPlayerNameInput">Player Name</label>
                    <input type="text" id="newPlayerNameInput" placeholder="Enter your name" maxlength="20" required autocomplete="off">
                </div>
                
                <div class="game-mode-selection">
                    <label>Game Mode</label>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="radio" name="newGameMode" value="cooperative" checked>
                            <span>ü§ù Cooperative</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="newGameMode" value="versus">
                            <span>‚öîÔ∏è Versus</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="newGameMode" value="survival">
                            <span>üèÉ Survival</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button id="createNewGameBtn" class="action-btn primary-btn">
                        üéÆ Create Game
                    </button>
                    <button id="backToMainMenuBtn" class="action-btn secondary-btn">
                        ‚Üê Back to Menu
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resume Game Screen -->
    <div id="resumeGameScreen" class="screen" style="display: none;">
        <div class="resume-container">
            <div class="resume-header">
                <h2>üîÑ Resume Game</h2>
                <p>Select a saved game to continue your adventure</p>
            </div>
            
            <div class="player-name-section">
                <div class="input-group">
                    <label for="resumePlayerNameInput">Enter Your Player Name</label>
                    <input type="text" id="resumePlayerNameInput" placeholder="Enter your name to find saves" maxlength="20" autocomplete="off">
                </div>
            </div>
            
            <div id="savedGamesList" class="saved-games-list" style="display: none;">
                <div class="saved-games-header">
                    <h3>Your Saved Games</h3>
                    <div id="savedGamesCount" class="games-count"></div>
                </div>
                <div id="savedGamesContainer" class="saved-games-container">
                    <!-- Saved games will be populated here -->
                </div>
            </div>
            
            <div id="noSavedGamesMessage" class="no-saves-message" style="display: none;">
                <div class="no-saves-icon">üíæ</div>
                <h4>No Saved Games Found</h4>
                <p>No saved games found for this player name.</p>
                <p>Start a new game to begin your adventure!</p>
            </div>
            
            <div class="form-actions">
                <button id="backToMainFromResumeBtn" class="action-btn secondary-btn">
                    ‚Üê Back to Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Legacy Login Screen (hidden, for compatibility) -->
    <div id="loginScreen" class="screen" style="display: none;">
        <div class="login-container">
            <div class="login-header">
                <h1>üåª Plants vs Zombies</h1>
                <p class="login-subtitle">Redis Edition - Multiplayer Tower Defense</p>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <label for="playerNameInput">Player Name</label>
                    <input type="text" id="playerNameInput" placeholder="Enter your name" maxlength="20" required>
                </div>
                
                <div class="input-group">
                    <label for="gameIdInput">Game ID (Optional)</label>
                    <input type="text" id="gameIdInput" placeholder="Leave blank to create new game" maxlength="50" autocomplete="off">
                </div>
                
                <div class="game-mode-selection">
                    <label>Game Mode</label>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="cooperative" checked>
                            <span>ü§ù Cooperative</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="versus">
                            <span>‚öîÔ∏è Versus</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="survival">
                            <span>üèÉ Survival</span>
                        </label>
                    </div>
                </div>
                
                <button id="joinGameBtn" class="join-btn">
                    üéÆ Join Game
                </button>
                
                <button id="resumeGameBtn" class="resume-btn" style="display: none;">
                    üéÆ Continue Playing
                </button>
                
                <div id="activeGamesList" class="active-games-list" style="display: none;">
                    <div class="active-games-header">
                        <h3>üéÆ Your Saved Games</h3>
                        <p class="active-games-subtitle">Continue where you left off</p>
                    </div>
                    <div id="activeGamesContainer" class="active-games-container">
                        <!-- Active games will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="login-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalGames">0</div>
                    <div class="stat-label">Total Games</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalPlayers">0</div>
                    <div class="stat-label">Players Online</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeGames">0</div>
                    <div class="stat-label">Active Games</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="game-over-screen" style="display: none;">
        <div class="game-over-container">
            <div id="gameOverContent" class="game-over-content">
                <!-- Content will be populated by JavaScript -->
            </div>
            <div class="game-over-actions">
                <button id="playAgainBtn" class="control-btn">üîÑ Play Again</button>
                <button id="viewLeaderboardBtn" class="control-btn">üèÜ Leaderboard</button>
            </div>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üèÜ Leaderboard</h2>
                <button id="closeLeaderboard" class="close-btn">√ó</button>
            </div>
            <div class="leaderboard-tabs">
                <button class="tab-btn active" data-category="high_scores">High Scores</button>
                <button class="tab-btn" data-category="zombies_killed">Zombies Killed</button>
            </div>
            <div id="leaderboardContent" class="leaderboard-content">
                <!-- Leaderboard will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner">üåª</div>
            <div class="loading-text">Loading Plants vs Zombies...</div>
            <div class="loading-progress">
                <div class="loading-bar"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="audio-manager.js"></script>
    <script src="game-client.js"></script>
</body>
</html>
