<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ» Plants vs Zombies - Redis Edition</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Fredoka+One:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background -->
    <div class="background">
        <div class="clouds"></div>
        <div class="sun-background"></div>
    </div>

    <!-- Main Game Container -->
    <div id="gameContainer" class="game-container">
        
        <!-- Header -->
        <header class="game-header">
            <div class="logo">
                <h1>ğŸŒ» Plants vs Zombies</h1>
                <span class="subtitle">Redis Edition</span>
            </div>
            
            <!-- Game Controls in Navigation -->
            <div class="nav-controls">
                <button id="startGameBtn" class="nav-btn start-btn">
                    ğŸš€ Start Game
                </button>
                <button id="pauseGameBtn" class="nav-btn pause-btn" style="display: none;">
                    â¸ï¸ Pause
                </button>
                <div class="audio-controls" style="display: none;" id="audioControls">
                    <button id="musicToggle" class="audio-btn" title="Toggle Music">
                        ğŸµ
                    </button>
                    <button id="sfxToggle" class="audio-btn" title="Toggle Sound Effects">
                        ğŸ”Š
                    </button>
                </div>
            </div>
            
            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-icon">â˜€ï¸</span>
                    <span id="sunAmount" class="stat-value">50</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">ğŸ†</span>
                    <span id="scoreAmount" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">ğŸŒŠ</span>
                    <span>Wave <span id="waveNumber" class="stat-value">1</span></span>
                </div>
            </div>

            <div class="player-info">
                <span id="playerName" class="player-name">Player</span>
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Connecting...</span>
                </div>
            </div>
        </header>

        <!-- Game Board -->
        <main class="game-main">
            <div class="game-board-container">
                <!-- Lawn Mowers -->
                <div class="lawn-mowers">
                    <div class="lawn-mower" data-row="0">ğŸšœ</div>
                    <div class="lawn-mower" data-row="1">ğŸšœ</div>
                    <div class="lawn-mower" data-row="2">ğŸšœ</div>
                    <div class="lawn-mower" data-row="3">ğŸšœ</div>
                    <div class="lawn-mower" data-row="4">ğŸšœ</div>
                </div>

                <!-- Game Board Grid -->
                <div id="gameBoard" class="game-board">
                    <!-- Grid cells will be generated by JavaScript -->
                </div>

                <!-- Projectiles Layer -->
                <div id="projectilesLayer" class="projectiles-layer"></div>

                <!-- Effects Layer -->
                <div id="effectsLayer" class="effects-layer"></div>
            </div>

            <!-- Side Panel -->
            <aside class="side-panel">
                <!-- Plant Selection -->
                <div class="plant-selection">
                    <h3>ğŸŒ± Plant Arsenal</h3>
                    <div class="plant-cards">
                        <div class="plant-card" data-plant="ğŸŒ»" data-cost="50">
                            <div class="plant-icon">ğŸŒ»</div>
                            <div class="plant-info">
                                <div class="plant-name">Sunflower</div>
                                <div class="plant-cost">â˜€ï¸ 50</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="ğŸŒ±" data-cost="100">
                            <div class="plant-icon">ğŸŒ±</div>
                            <div class="plant-info">
                                <div class="plant-name">Peashooter</div>
                                <div class="plant-cost">â˜€ï¸ 100</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="â„ï¸" data-cost="175">
                            <div class="plant-icon">â„ï¸</div>
                            <div class="plant-info">
                                <div class="plant-name">Snow Pea</div>
                                <div class="plant-cost">â˜€ï¸ 175</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="ğŸŒ°" data-cost="50">
                            <div class="plant-icon">ğŸŒ°</div>
                            <div class="plant-info">
                                <div class="plant-name">Wall-nut</div>
                                <div class="plant-cost">â˜€ï¸ 50</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="ğŸ’" data-cost="150">
                            <div class="plant-icon">ğŸ’</div>
                            <div class="plant-info">
                                <div class="plant-name">Cherry Bomb</div>
                                <div class="plant-cost">â˜€ï¸ 150</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="ğŸŒ¶ï¸" data-cost="125">
                            <div class="plant-icon">ğŸŒ¶ï¸</div>
                            <div class="plant-info">
                                <div class="plant-name">Jalapeno</div>
                                <div class="plant-cost">â˜€ï¸ 125</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="ğŸŒµ" data-cost="125">
                            <div class="plant-icon">ğŸŒµ</div>
                            <div class="plant-info">
                                <div class="plant-name">Cactus</div>
                                <div class="plant-cost">â˜€ï¸ 125</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="plant-card" data-plant="ğŸ„" data-cost="0">
                            <div class="plant-icon">ğŸ„</div>
                            <div class="plant-info">
                                <div class="plant-name">Puff-shroom</div>
                                <div class="plant-cost">â˜€ï¸ FREE</div>
                            </div>
                            <div class="cooldown-overlay"></div>
                        </div>
                    </div>
                </div>

                <!-- Power-ups -->
                <div class="powerups-section">
                    <h3>âš¡ Power-ups</h3>
                    <div class="powerup-cards">
                        <div class="powerup-card" data-powerup="â˜€ï¸">
                            <div class="powerup-icon">â˜€ï¸</div>
                            <div class="powerup-name">Sun Boost</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="powerup-card" data-powerup="âš¡">
                            <div class="powerup-icon">âš¡</div>
                            <div class="powerup-name">Speed Boost</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="powerup-card" data-powerup="ğŸ›¡ï¸">
                            <div class="powerup-icon">ğŸ›¡ï¸</div>
                            <div class="powerup-name">Plant Shield</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                        
                        <div class="powerup-card" data-powerup="ğŸ’¥">
                            <div class="powerup-icon">ğŸ’¥</div>
                            <div class="powerup-name">Damage Boost</div>
                            <div class="cooldown-overlay"></div>
                        </div>
                    </div>
                </div>

                <!-- Multiplayer Info -->
                <div class="multiplayer-info">
                    <h3>ğŸ‘¥ Players</h3>
                    <div id="playersList" class="players-list">
                        <!-- Players will be populated by JavaScript -->
                    </div>
                </div>
            </aside>
        </main>

        <!-- Wave Progress -->
        <div class="wave-progress">
            <div class="wave-info">
                <span id="waveMessage" class="wave-message">Prepare your defenses!</span>
                <div class="progress-bar">
                    <div id="waveProgressBar" class="progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div id="mainMenuScreen" class="screen">
        <div class="main-menu-container">
            <div class="game-title">
                <h1>ğŸŒ» Plants vs Zombies</h1>
                <p class="game-subtitle">Redis Edition - Defend Your Garden!</p>
            </div>
            
            <div class="main-menu-buttons">
                <button id="startNewGameBtn" class="main-menu-btn new-game-btn">
                    <div class="btn-icon">ğŸŒ±</div>
                    <div class="btn-content">
                        <div class="btn-title">Start New Game</div>
                        <div class="btn-description">Begin a fresh adventure</div>
                    </div>
                </button>
                
                <button id="resumeGameMenuBtn" class="main-menu-btn resume-game-btn">
                    <div class="btn-icon">ğŸ”„</div>
                    <div class="btn-content">
                        <div class="btn-title">Resume Game</div>
                        <div class="btn-description">Continue your saved progress</div>
                    </div>
                </button>
                
                <button id="leaderboardMenuBtn" class="main-menu-btn leaderboard-btn">
                    <div class="btn-icon">ğŸ†</div>
                    <div class="btn-content">
                        <div class="btn-title">Leaderboard</div>
                        <div class="btn-description">View top players</div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- New Game Setup Screen -->
    <div id="newGameScreen" class="screen" style="display: none;">
        <div class="login-container">
            <div class="login-header">
                <h2>ğŸŒ± Start New Game</h2>
                <p>Enter your player name to begin your garden defense!</p>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <label for="newPlayerNameInput">Player Name</label>
                    <input type="text" id="newPlayerNameInput" placeholder="Enter your name" maxlength="20" required autocomplete="off">
                </div>
                
                <div class="game-mode-selection">
                    <label>Game Mode</label>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="radio" name="newGameMode" value="cooperative" checked>
                            <span>ğŸ¤ Cooperative</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="newGameMode" value="versus">
                            <span>âš”ï¸ Versus</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="newGameMode" value="survival">
                            <span>ğŸƒ Survival</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button id="createNewGameBtn" class="action-btn primary-btn">
                        ğŸ® Create Game
                    </button>
                    <button id="backToMainMenuBtn" class="action-btn secondary-btn">
                        â† Back to Menu
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resume Game Screen -->
    <div id="resumeGameScreen" class="screen" style="display: none;">
        <div class="resume-container">
            <div class="resume-header">
                <h2>ğŸ”„ Resume Game</h2>
                <p>Select a saved game to continue your adventure</p>
            </div>
            
            <div class="player-name-section">
                <div class="input-group">
                    <label for="resumePlayerNameInput">Enter Your Player Name</label>
                    <input type="text" id="resumePlayerNameInput" placeholder="Enter your name to find saves" maxlength="20" autocomplete="off">
                </div>
            </div>
            
            <div id="savedGamesList" class="saved-games-list" style="display: none;">
                <div class="saved-games-header">
                    <h3>Your Saved Games</h3>
                    <div id="savedGamesCount" class="games-count"></div>
                </div>
                <div id="savedGamesContainer" class="saved-games-container">
                    <!-- Saved games will be populated here -->
                </div>
            </div>
            
            <div id="noSavedGamesMessage" class="no-saves-message" style="display: none;">
                <div class="no-saves-icon">ğŸ’¾</div>
                <h4>No Saved Games Found</h4>
                <p>No saved games found for this player name.</p>
                <p>Start a new game to begin your adventure!</p>
            </div>
            
            <div class="form-actions">
                <button id="backToMainFromResumeBtn" class="action-btn secondary-btn">
                    â† Back to Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Legacy Login Screen (hidden, for compatibility) -->
    <div id="loginScreen" class="screen" style="display: none;">
        <div class="login-container">
            <div class="login-header">
                <h1>ğŸŒ» Plants vs Zombies</h1>
                <p class="login-subtitle">Redis Edition - Multiplayer Tower Defense</p>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <label for="playerNameInput">Player Name</label>
                    <input type="text" id="playerNameInput" placeholder="Enter your name" maxlength="20" required>
                </div>
                
                <div class="input-group">
                    <label for="gameIdInput">Game ID (Optional)</label>
                    <input type="text" id="gameIdInput" placeholder="Leave blank to create new game" maxlength="50" autocomplete="off">
                </div>
                
                <div class="game-mode-selection">
                    <label>Game Mode</label>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="cooperative" checked>
                            <span>ğŸ¤ Cooperative</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="versus">
                            <span>âš”ï¸ Versus</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="survival">
                            <span>ğŸƒ Survival</span>
                        </label>
                    </div>
                </div>
                
                <button id="joinGameBtn" class="join-btn">
                    ğŸ® Join Game
                </button>
                
                <button id="resumeGameBtn" class="resume-btn" style="display: none;">
                    ğŸ® Continue Playing
                </button>
                
                <div id="activeGamesList" class="active-games-list" style="display: none;">
                    <div class="active-games-header">
                        <h3>ğŸ® Your Saved Games</h3>
                        <p class="active-games-subtitle">Continue where you left off</p>
                    </div>
                    <div id="activeGamesContainer" class="active-games-container">
                        <!-- Active games will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="login-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalGames">0</div>
                    <div class="stat-label">Total Games</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalPlayers">0</div>
                    <div class="stat-label">Players Online</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeGames">0</div>
                    <div class="stat-label">Active Games</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="game-over-screen" style="display: none;">
        <div class="game-over-container">
            <div id="gameOverContent" class="game-over-content">
                <!-- Content will be populated by JavaScript -->
            </div>
            <div class="game-over-actions">
                <button id="playAgainBtn" class="control-btn">ğŸ”„ Play Again</button>
                <button id="viewLeaderboardBtn" class="control-btn">ğŸ† Leaderboard</button>
            </div>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ† Leaderboard</h2>
                <button id="closeLeaderboard" class="close-btn">Ã—</button>
            </div>
            <div class="leaderboard-tabs">
                <button class="tab-btn active" data-category="high_scores">High Scores</button>
                <button class="tab-btn" data-category="zombies_killed">Zombies Killed</button>
            </div>
            <div id="leaderboardContent" class="leaderboard-content">
                <!-- Leaderboard will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner">ğŸŒ»</div>
            <div class="loading-text">Loading Plants vs Zombies...</div>
            <div class="loading-progress">
                <div class="loading-bar"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="audio-manager.js"></script>
    <script src="game-client.js"></script>
</body>
</html>
